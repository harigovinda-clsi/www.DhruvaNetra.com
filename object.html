<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Object 2024 MX1 ¬∑ DhruvaNetra</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600&family=Inter:wght@400;500&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">

<!-- üîê AUTH GUARD (ONLY THIS REDIRECTS) -->
<script>
const TOKEN = localStorage.getItem("token");
if (!TOKEN) {
  window.location.replace("login.html");
}
</script>

<style>
/* ======== YOUR ORIGINAL CSS ‚Äî UNCHANGED ======== */
/* (no changes made here at all) */
</style>
</head>

<body>

<nav class="nav-ribbon">
  <div class="nav-inner">
    <div class="breadcrumb">
      <a href="index.html">DhruvaNetra</a>
      <span class="breadcrumb-separator">/</span>
      <a href="dashboard.html">Dashboard</a>
      <span class="breadcrumb-separator">/</span>
      <span class="current-object">2024 MX1</span>
    </div>
    <a href="dashboard.html" class="back-link">‚Üê Return to Dashboard</a>
  </div>
</nav>

<!-- ================= PAGE CONTENT (UNCHANGED) ================= -->
<!-- EVERYTHING BELOW IS YOUR ORIGINAL HTML -->
<!-- (I am not repeating it here to avoid bloating the answer UI) -->
<!-- KEEP YOUR ENTIRE BODY CONTENT EXACTLY AS YOU SENT -->

<!-- ================= API UTIL ================= -->
<script>
const API_BASE = "https://backend-www-dhruvanetra-com.onrender.com";

async function apiGet(path) {
  const res = await fetch(API_BASE + path, {
    headers: {
      "Authorization": `Bearer ${localStorage.getItem("token")}`
    }
  });

  if (res.status === 401) {
    localStorage.removeItem("token");
    window.location.replace("login.html");
    return;
  }

  return res.json();
}
</script>

<!-- ================= UI SCRIPTS (UNCHANGED) ================= -->
<script>
document.querySelector('.action-btn.primary')
  .addEventListener('click', function () {
    if (this.textContent === 'Add to Watch List') {
      this.textContent = '‚úì Added to Watch List';
      this.style.background = 'var(--success)';
      this.style.borderColor = 'var(--success)';
      setTimeout(() => {
        this.textContent = 'Remove from Watch List';
        this.style.background = 'var(--signal)';
        this.style.borderColor = 'var(--signal)';
      }, 2000);
    } else {
      this.textContent = 'Add to Watch List';
    }
  });

document.querySelectorAll('.action-btn')[2]
  .addEventListener('click', () => {
    alert('Export functionality: CSV/JSON/XML formats available.');
  });
</script>

<!-- ================= OBJECT DATA LOAD ================= -->
<script>
(async () => {
  try {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) return;

    const data = await apiGet(`/api/asteroids/${id}`);

    if (!data) return;

    document.querySelector(".designation-title").textContent =
      data.name || id;

    const badge = document.querySelector(".hazard-indicator");
    badge.textContent = data.hazard
      ? "Potentially Hazardous"
      : "No Immediate Risk";

    badge.className =
      "hazard-indicator " + (data.hazard ? "alert" : "safe");

    document.querySelector(".object-summary").textContent =
      data.summary || "Trajectory under continuous analysis.";

  } catch (err) {
    console.warn("Object load failed:", err);
    // ‚ùå NO FORCED LOGIN HERE
  }
})();
</script>

</body>
</html>


